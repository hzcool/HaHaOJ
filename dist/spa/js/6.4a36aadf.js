(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"696c":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex_center"},[n("div",{staticClass:"justify-center q-ma-md",staticStyle:{"min-width":"1300px",width:"60%"}},[n("br"),n("div",{staticClass:"text-h3 text-center"},[t._v(" 比赛列表 ")]),n("div",{staticClass:"flex_between q-mt-md"},[n("div",{staticStyle:{display:"flex","font-size":"15px",color:"black"}},[n("div",[t._v(" 比赛ID "),n("Input",{staticStyle:{width:"200px","margin-left":"2px"},attrs:{placeholder:"Search By ID"},on:{"on-enter":t.search},model:{value:t.id,callback:function(e){t.id=e},expression:"id"}})],1),n("div",{staticStyle:{"margin-left":"20px"}},[t._v(" 比赛标题 "),n("Input",{staticStyle:{width:"200px","margin-left":"2px"},attrs:{placeholder:"Search By Contest Title"},on:{"on-enter":t.search},model:{value:t.contestName,callback:function(e){t.contestName=e},expression:"contestName"}})],1),n("div",{staticStyle:{"margin-left":"20px"}},[t._v("\n          状态\n          "),n("Select",{staticStyle:{width:"120px","margin-left":"2px"},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},t._l(t.statusList,(function(e){return n("Option",{key:e.value,class:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),n("Button",{staticStyle:{"margin-left":"20px"},attrs:{loading:t.sloading,type:"info",shape:"circle",icon:"ios-search"},on:{click:t.search}},[t._v("查找")])],1),n("Page",{staticStyle:{float:"right"},attrs:{total:t.total,"page-size":t.pageSize,"show-total":"","show-elevator":""},on:{"on-change":t.changePage}})],1),n("div",{staticClass:"contesttable q-mt-lg"},[n("Table",{attrs:{columns:t.head,data:t.data,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"title",fn:function(e){var i=e.row;return[n("Button",{staticStyle:{color:"#2d8cf0"},attrs:{type:"text"},on:{click:function(e){return t.forEnter(i)}}},[t._v(" "+t._s(i.title)+" ")])]}},{key:"status",fn:function(e){var i=e.row;return[n("span",{class:i.status},[t._v(" "+t._s(i.status)+" ")])]}},{key:"length",fn:function(e){var i=e.row;return[n("span",[t._v(" "+t._s(i.length.toFixed(2))+" ")])]}}])})],1)])])},s=[],a={data:function(){return{head:[{title:"比赛ID",key:"id",width:100,align:"center"},{title:"比赛标题",slot:"title",align:"center"},{title:"开始时间",key:"begin",align:"center"},{title:"比赛时长(小时)",slot:"length",align:"center",width:200},{title:"比赛类型",key:"type",align:"center",width:120},{title:"赛 制",key:"format",align:"center",width:120},{title:"状 态",slot:"status",align:"center",width:120},{title:"队伍总数",key:"num",align:"center",width:120}],data:[],total:0,pageSize:20,id:"",contestName:"",statusList:[{value:"All",label:"All"},{value:"Pending",label:"Pending"},{value:"Running",label:"Running"},{value:"Ended",label:"Ended"}],select:"All",choose_id:0,sloading:!1,loaded:!1}},methods:{getRules:function(){var t={};return this.id=this.id.trim(),this.contestName=this.contestName.trim(),this.id&&(t.id=this.id),this.contestName&&(t.title=this.contestName),"All"!=this.select&&(t.status=this.select),t},search:function(){var t=this;this.sloading=!0,setTimeout((function(){t.searchContests(1,t.pageSize,t.getRules())}),600)},changePage:function(t){var e=(t-1)*this.pageSize+1,n=t*this.pageSize;this.searchContests(e,n,this.getRules())},searchContests:function(t,e,n){var i=this,s=new FormData;s.set("l",t),s.set("r",e),s.append("rules",JSON.stringify(n)),this.$req.post("getContests",s).then((function(t){void 0==t.errno&&(i.total=t.total,i.data=t.data,i.loaded=!0),i.sloading=!1}))},enter:function(){this.$router.push({name:"contest",params:{id:this.choose_id}})},check:function(t){var e=this;this.$req.get("checkContestPassword",{password:t,id:this.choose_id}).then((function(t){void 0==t.errno&&t.ok&&e.enter()}))},forEnter:function(t){var e=this;if(this.choose_id=t.id,"private"==t.type){if(!this.$store.state.user.is_login)return void this.$notify("error","请先登陆");this.$req.get("enterContest",{id:t.id}).then((function(t){void 0==t.errno&&(t.ok?e.enter():e.$q.dialog({dark:!0,title:"请输入参赛码",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk((function(t){e.check(t)})))}))}else this.enter()},rowClassName:function(t,e){return"Pending"==t.status?"pendingRow":"Running"==t.status?"runningRow":""}},mounted:function(){this.searchContests(1,this.pageSize,{}),this.loaded=!0}},l=a,o=(n("6dda"),n("7d10"),n("4023")),c=Object(o["a"])(l,i,s,!1,null,"482e0c3a",null);e["default"]=c.exports},"6dda":function(t,e,n){"use strict";var i=n("a947"),s=n.n(i);s.a},"7d10":function(t,e,n){"use strict";var i=n("ccb6"),s=n.n(i);s.a},a947:function(t,e,n){},ccb6:function(t,e,n){}}]);